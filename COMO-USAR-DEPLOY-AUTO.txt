=============================================================================
INSIGHTS DASHBOARD v1.1.0 - DEPLOY AUTOM√ÅTICO NA VPS
=============================================================================

üìã INSTRU√á√ïES R√ÅPIDAS:

1Ô∏è‚É£ Conecte na VPS via SSH:

   ssh root@168.231.92.148
   Senha: Barbie98####


2Ô∏è‚É£ Execute este comando √∫nico (copie e cole tudo):

   curl -fsSL https://raw.githubusercontent.com/WillCoelli/insights_dashboard/main/deploy-vps-auto.sh -o deploy.sh && chmod +x deploy.sh && ./deploy.sh


3Ô∏è‚É£ Siga as instru√ß√µes na tela:

   - O script vai verificar/instalar Docker
   - Inicializar Docker Swarm
   - Baixar as configura√ß√µes
   - Pedir para voc√™ configurar as vari√°veis do Supabase
   - Fazer deploy de tudo automaticamente


4Ô∏è‚É£ Vari√°veis que voc√™ precisa ter em m√£os:

   ‚úÖ NEXT_PUBLIC_SUPABASE_URL (exemplo: https://seu-projeto.supabase.co)
   ‚úÖ NEXT_PUBLIC_SUPABASE_ANON_KEY (chave p√∫blica)
   ‚úÖ SUPABASE_SERVICE_ROLE_KEY (chave privada)
   ‚úÖ ACME_EMAIL (seu email para Let's Encrypt)


5Ô∏è‚É£ Ap√≥s o deploy:

   Acesse: https://gestor.disparazap.com


=============================================================================
ALTERNATIVA: Deploy manual passo a passo
=============================================================================

Se preferir fazer manualmente, conecte na VPS e execute:

# Baixar o script
wget https://raw.githubusercontent.com/WillCoelli/insights_dashboard/main/deploy-vps-auto.sh

# Tornar execut√°vel
chmod +x deploy-vps-auto.sh

# Executar
./deploy-vps-auto.sh


=============================================================================
COMANDOS √öTEIS DEPOIS DO DEPLOY
=============================================================================

# Ver logs em tempo real
docker service logs insights_insights-dashboard -f

# Verificar status dos servi√ßos
docker service ls

# Ver r√©plicas
docker service ps insights_insights-dashboard

# Testar health
curl https://gestor.disparazap.com/api/health

# Escalar para 4 r√©plicas
docker service scale insights_insights-dashboard=4

# Reiniciar servi√ßo
docker service update --force insights_insights-dashboard

# Remover tudo (cuidado!)
docker stack rm insights
docker stack rm traefik


=============================================================================
TROUBLESHOOTING
=============================================================================

‚ùå PROBLEMA: HTTPS n√£o funciona

‚úÖ SOLU√á√ÉO:
   1. Verifique se o DNS aponta para o servidor:
      nslookup gestor.disparazap.com

   2. Aguarde alguns minutos para o Let's Encrypt gerar certificado

   3. Veja os logs do Traefik:
      docker service logs traefik_traefik -f


‚ùå PROBLEMA: Servi√ßo n√£o sobe

‚úÖ SOLU√á√ÉO:
   1. Veja os logs:
      docker service logs insights_insights-dashboard -f

   2. Verifique se as vari√°veis est√£o corretas:
      cat ~/insights-deploy/.env


‚ùå PROBLEMA: Erro ao baixar imagem

‚úÖ SOLU√á√ÉO:
   A imagem est√° p√∫blica no GitHub Container Registry.
   Se houver erro, aguarde o GitHub Actions terminar o build:
   https://github.com/WillCoelli/insights_dashboard/actions


=============================================================================
SUPORTE
=============================================================================

üìñ Documenta√ß√£o completa:
   https://github.com/WillCoelli/insights_dashboard/blob/main/DEPLOY-PRODUCTION.md

üêõ Reportar problemas:
   https://github.com/WillCoelli/insights_dashboard/issues

=============================================================================
